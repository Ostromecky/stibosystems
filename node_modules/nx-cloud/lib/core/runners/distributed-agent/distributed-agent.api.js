const a5_0x16b6=['axiosMultipleTries','Completed\x20run\x20group\x20with\x20an\x20error','../../../utilities/axios','../../../utilities/nx-imports-light','ciExecutionEnv:\x20','apiAxiosInstance','Completing\x20with\x20an\x20error','createMetricRecorder','../../../utilities/metric-logger','dtePollTasks','ciExecutionId','VERBOSE_LOGGING','__esModule','DistributedAgentApi','apply','ciExecutionEnv','RUNNER_FAILURE_PERF_ENTRY','ciExecutionId:\x20','defineProperty','next','__awaiter','response','done','tasks','post','branch','throw','axiosException','agentName','createApiAxiosInstance','note','recordMetric','runGroup','runGroup:\x20','error:\x20','../../../utilities/environment','mapRespToPerfEntry'];(function(_0x476168,_0x16b6e7){const _0x55f042=function(_0x2c7c86){while(--_0x2c7c86){_0x476168['push'](_0x476168['shift']());}};_0x55f042(++_0x16b6e7);}(a5_0x16b6,0x190));const a5_0x55f0=function(_0x476168,_0x16b6e7){_0x476168=_0x476168-0x0;let _0x55f042=a5_0x16b6[_0x476168];return _0x55f042;};'use strict';var __awaiter=this&&this[a5_0x55f0('0x1b')]||function(_0x3385f7,_0x350628,_0x577289,_0x340013){function _0x3eda32(_0x24aad0){return _0x24aad0 instanceof _0x577289?_0x24aad0:new _0x577289(function(_0x4d51d0){_0x4d51d0(_0x24aad0);});}return new(_0x577289||(_0x577289=Promise))(function(_0x4a4405,_0x34ed0f){function _0x1fdae6(_0x11f103){try{_0x2c65ab(_0x340013[a5_0x55f0('0x1a')](_0x11f103));}catch(_0x1b2fe2){_0x34ed0f(_0x1b2fe2);}}function _0x3db3de(_0x2b5ba3){try{_0x2c65ab(_0x340013[a5_0x55f0('0x21')](_0x2b5ba3));}catch(_0x53adcb){_0x34ed0f(_0x53adcb);}}function _0x2c65ab(_0x5eb1d9){_0x5eb1d9[a5_0x55f0('0x1d')]?_0x4a4405(_0x5eb1d9['value']):_0x3eda32(_0x5eb1d9['value'])['then'](_0x1fdae6,_0x3db3de);}_0x2c65ab((_0x340013=_0x340013[a5_0x55f0('0x15')](_0x3385f7,_0x350628||[]))[a5_0x55f0('0x1a')]());});};Object[a5_0x55f0('0x19')](exports,a5_0x55f0('0x13'),{'value':!![]});exports['DistributedAgentApi']=void 0x0;const axios_1=require(a5_0x55f0('0x9'));const environment_1=require(a5_0x55f0('0x5'));const metric_logger_1=require(a5_0x55f0('0xf'));const {output}=require(a5_0x55f0('0xa'));class DistributedAgentApi{constructor(_0x363a0c,_0x5825e8,_0x11c216,_0x571988,_0x2a443b,_0x5aaca9){this['branch']=_0x5825e8;this[a5_0x55f0('0x2')]=_0x11c216;this[a5_0x55f0('0x11')]=_0x571988;this[a5_0x55f0('0x16')]=_0x2a443b;this[a5_0x55f0('0x23')]=_0x5aaca9;this[a5_0x55f0('0xc')]=(0x0,axios_1[a5_0x55f0('0x24')])(_0x363a0c);}[a5_0x55f0('0x1e')](_0x3cee89,_0x104cec,_0x3de5d6,_0x4dcace){var _0x5ba16e;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2ecbf2=(0x0,metric_logger_1[a5_0x55f0('0xe')])(a5_0x55f0('0x10'));try{const _0x42fea0=yield(0x0,axios_1['axiosMultipleTries'])(()=>this['apiAxiosInstance'][a5_0x55f0('0x1f')]('/nx-cloud/executions/tasks',{'runGroup':this['runGroup'],'ciExecutionId':this['ciExecutionId'],'ciExecutionEnv':this['ciExecutionEnv'],'agentName':this[a5_0x55f0('0x23')],'executionId':_0x3cee89,'statusCode':_0x104cec,'completedTasks':_0x3de5d6,'targets':_0x4dcace}));_0x2ecbf2[a5_0x55f0('0x1')]((0x0,metric_logger_1[a5_0x55f0('0x6')])(_0x42fea0));return _0x42fea0['data'];}catch(_0x2ed220){_0x2ecbf2[a5_0x55f0('0x1')](((_0x5ba16e=_0x2ed220===null||_0x2ed220===void 0x0?void 0x0:_0x2ed220[a5_0x55f0('0x22')])===null||_0x5ba16e===void 0x0?void 0x0:_0x5ba16e[a5_0x55f0('0x1c')])?(0x0,metric_logger_1[a5_0x55f0('0x6')])(_0x2ed220[a5_0x55f0('0x22')][a5_0x55f0('0x1c')]):metric_logger_1[a5_0x55f0('0x17')]);throw _0x2ed220;}});}['completeRunGroupWithError'](_0x35cf8a){var _0x4ba9e8;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a5_0x55f0('0x12')]){output[a5_0x55f0('0x0')]({'title':a5_0x55f0('0xd'),'bodyLines':[a5_0x55f0('0x18')+this[a5_0x55f0('0x11')],a5_0x55f0('0xb')+this[a5_0x55f0('0x16')],a5_0x55f0('0x3')+this[a5_0x55f0('0x2')],a5_0x55f0('0x4')+_0x35cf8a]});}const _0x2cbca9=(0x0,metric_logger_1['createMetricRecorder'])('completeRunGroup');try{const _0x1ae6c4=yield(0x0,axios_1[a5_0x55f0('0x7')])(()=>this[a5_0x55f0('0xc')]['post']('/nx-cloud/executions/complete-run-group',{'branch':this[a5_0x55f0('0x20')],'runGroup':this[a5_0x55f0('0x2')],'ciExecutionId':this[a5_0x55f0('0x11')],'ciExecutionEnv':this['ciExecutionEnv'],'agentName':this[a5_0x55f0('0x23')],'criticalErrorMessage':_0x35cf8a}));if(environment_1[a5_0x55f0('0x12')]){output['note']({'title':a5_0x55f0('0x8')});}_0x2cbca9[a5_0x55f0('0x1')]((0x0,metric_logger_1[a5_0x55f0('0x6')])(_0x1ae6c4));}catch(_0x440ba9){_0x2cbca9[a5_0x55f0('0x1')](((_0x4ba9e8=_0x440ba9===null||_0x440ba9===void 0x0?void 0x0:_0x440ba9[a5_0x55f0('0x22')])===null||_0x4ba9e8===void 0x0?void 0x0:_0x4ba9e8[a5_0x55f0('0x1c')])?(0x0,metric_logger_1[a5_0x55f0('0x6')])(_0x440ba9[a5_0x55f0('0x22')][a5_0x55f0('0x1c')]):metric_logger_1[a5_0x55f0('0x17')]);console['error'](_0x440ba9);}});}}exports[a5_0x55f0('0x14')]=DistributedAgentApi;