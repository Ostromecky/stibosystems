const a11_0x5508=['Starting\x20distributed\x20command\x20execution','projectGraph','SIGTERM','./distributed-execution.api','extractGitSha','completeRunGroupWithError','defineProperty','ENCRYPTION_KEY','value','../../../utilities/metric-logger','log','message','canDetectRunGroup','../../../utilities/environment','dte-main','Successfully\x20completed\x20running\x20the\x20command.','splitTasksIntoStages','throw','commandStatus','--skip-nx-cache\x20is\x20ignored\x20when\x20using\x20distributed\x20tasks\x20execution\x20(DTE).','submitRunMetrics','Main\x20job\x20terminated\x20with\x20an\x20error:\x20\x22','__awaiter','Command\x20execution\x20failed.','lifeCycle','tasks','E2EEncryption','../../file-storage/file-storage','taskGraph','Main\x20job\x20was\x20terminated\x20via\x20SIGINT','warn','axiosException','../../../utilities/nx-imports-light','values','exit','../../../utilities/dte-artifact-storage','getCIExecutionEnv','apply','SIGINT','FileStorage','processTasks','error','getBranch','extractGitRef','VERBOSE_LOGGING','getCIExecutionId','start','done','DistributedExecutionApi','See\x20run\x20details\x20at\x20','scheduleTask','../../error/print-run-group-error','nxCloudDistributedTasksRunner','Unable\x20to\x20complete\x20a\x20run.','DTE\x20needs\x20the\x20cache\x20to\x20share\x20files\x20between\x20agents.','endTasks','skipNxCache','./task-graph-creator','success','./process-tasks','../../../utilities/nx-imports','../../api/error-reporter.api','ErrorReporterApi','createTaskGraphCompat','note','then','encryptionKey'];(function(_0x55bb2b,_0x55080a){const _0x5437ea=function(_0x2e2d85){while(--_0x2e2d85){_0x55bb2b['push'](_0x55bb2b['shift']());}};_0x5437ea(++_0x55080a);}(a11_0x5508,0x1cc));const a11_0x5437=function(_0x55bb2b,_0x55080a){_0x55bb2b=_0x55bb2b-0x0;let _0x5437ea=a11_0x5508[_0x55bb2b];return _0x5437ea;};'use strict';var __awaiter=this&&this[a11_0x5437('0x1f')]||function(_0x33244e,_0x4ba0ca,_0x2512c2,_0x4d2416){function _0x208f8f(_0x4c1c34){return _0x4c1c34 instanceof _0x2512c2?_0x4c1c34:new _0x2512c2(function(_0x2a9b74){_0x2a9b74(_0x4c1c34);});}return new(_0x2512c2||(_0x2512c2=Promise))(function(_0x13725b,_0x2158db){function _0x43455d(_0x25a1c4){try{_0x4cf7be(_0x4d2416['next'](_0x25a1c4));}catch(_0x442e00){_0x2158db(_0x442e00);}}function _0x9ce150(_0x154c3a){try{_0x4cf7be(_0x4d2416[a11_0x5437('0x1a')](_0x154c3a));}catch(_0x2e88b0){_0x2158db(_0x2e88b0);}}function _0x4cf7be(_0x18ddfc){_0x18ddfc[a11_0x5437('0x38')]?_0x13725b(_0x18ddfc[a11_0x5437('0x11')]):_0x208f8f(_0x18ddfc[a11_0x5437('0x11')])[a11_0x5437('0x7')](_0x43455d,_0x9ce150);}_0x4cf7be((_0x4d2416=_0x4d2416[a11_0x5437('0x2e')](_0x33244e,_0x4ba0ca||[]))['next']());});};Object[a11_0x5437('0xf')](exports,'__esModule',{'value':!![]});exports[a11_0x5437('0x3d')]=void 0x0;const environment_1=require(a11_0x5437('0x16'));const metric_logger_1=require(a11_0x5437('0x12'));const error_reporter_api_1=require(a11_0x5437('0x3'));const print_run_group_error_1=require(a11_0x5437('0x3c'));const e2e_encryption_1=require('../../file-storage/e2e-encryption');const file_storage_1=require(a11_0x5437('0x24'));const distributed_execution_api_1=require(a11_0x5437('0xc'));const split_task_graph_into_stages_1=require('./split-task-graph-into-stages');const task_graph_creator_1=require(a11_0x5437('0x42'));const process_tasks_1=require(a11_0x5437('0x1'));const dte_artifact_storage_1=require(a11_0x5437('0x2c'));const {output}=require(a11_0x5437('0x29'));const {cacheDirectory}=require(a11_0x5437('0x2'));class NoopLifeCycle{[a11_0x5437('0x3b')](_0x295cdc){}['startTask'](_0x47ff41){}[a11_0x5437('0x40')](_0x742e76){}}const nxCloudDistributedTasksRunner=(_0x2a531a,_0x476d77,_0x5bf5af)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){if(_0x476d77[a11_0x5437('0x41')]){output[a11_0x5437('0x27')]({'title':a11_0x5437('0x1c'),'bodyLine':[a11_0x5437('0x3f')]});}if(environment_1[a11_0x5437('0x35')]){output[a11_0x5437('0x6')]({'title':a11_0x5437('0x9')});}_0x476d77[a11_0x5437('0x21')]=new NoopLifeCycle();const _0x4f50d8=(0x0,environment_1[a11_0x5437('0x33')])();const _0x236c29=(0x0,environment_1['getRunGroup'])();const _0x5273a2=(0x0,environment_1[a11_0x5437('0x36')])();const _0x20449f=(0x0,environment_1[a11_0x5437('0x2d')])();const _0x29cf90=(0x0,environment_1[a11_0x5437('0xd')])();const _0x4464d9=(0x0,environment_1[a11_0x5437('0x34')])();if(!(0x0,print_run_group_error_1[a11_0x5437('0x15')])(_0x236c29,_0x5273a2)){(0x0,print_run_group_error_1['printRunGroupError'])();process[a11_0x5437('0x2b')](0x1);}const _0x174128=new e2e_encryption_1[(a11_0x5437('0x23'))](environment_1[a11_0x5437('0x10')]||_0x476d77[a11_0x5437('0x8')]);const _0x43665b=new error_reporter_api_1[(a11_0x5437('0x4'))](_0x476d77);const _0x17ffdf=new dte_artifact_storage_1['DteArtifactStorage'](new file_storage_1[(a11_0x5437('0x30'))](_0x174128,_0x43665b,_0x476d77,a11_0x5437('0x17')),cacheDirectory);const _0x26cf85=new distributed_execution_api_1[(a11_0x5437('0x39'))](_0x476d77);attachSignalListenersToCompleteRunGroupOnError(_0x26cf85,_0x4f50d8,_0x236c29,_0x5273a2,_0x20449f);try{const _0xf6ecb6=getTaskGraph(_0x5bf5af,_0x2a531a,_0x476d77);const _0xeca5bf=yield runDistributedExecution(_0x26cf85,_0x476d77,_0x17ffdf,_0x4f50d8,_0x236c29,_0x5273a2,_0x20449f,_0xf6ecb6,_0x29cf90,_0x4464d9);if(_0xeca5bf[a11_0x5437('0x1b')]===0x0){output[a11_0x5437('0x0')]({'title':a11_0x5437('0x18'),'bodyLines':[a11_0x5437('0x3a')+_0xeca5bf['runUrl']]});}else{output['error']({'title':a11_0x5437('0x20'),'bodyLines':[a11_0x5437('0x3a')+_0xeca5bf['runUrl']]});}yield(0x0,metric_logger_1[a11_0x5437('0x1d')])(_0x476d77);process[a11_0x5437('0x2b')](_0xeca5bf['commandStatus']);}catch(_0x37ca7f){output[a11_0x5437('0x32')]({'title':a11_0x5437('0x3e'),'bodyLines':[_0x37ca7f['message']]});if(_0x37ca7f[a11_0x5437('0x28')]){console[a11_0x5437('0x13')](_0x37ca7f['axiosException']);}else{console['log'](_0x37ca7f);}try{yield _0x26cf85[a11_0x5437('0xe')](_0x4f50d8,_0x236c29,_0x5273a2,_0x20449f,a11_0x5437('0x1e')+_0x37ca7f[a11_0x5437('0x14')]+'\x22');}finally{process[a11_0x5437('0x2b')](0x1);}}});exports[a11_0x5437('0x3d')]=nxCloudDistributedTasksRunner;function getTaskGraph(_0x431653,_0x2ae076,_0x160dec){if(_0x431653[a11_0x5437('0x25')]){return _0x431653[a11_0x5437('0x25')];}else{return(0x0,task_graph_creator_1[a11_0x5437('0x5')])(_0x160dec,_0x431653[a11_0x5437('0xa')],_0x2ae076);}}function attachSignalListenersToCompleteRunGroupOnError(_0x2634e0,_0x221a72,_0xa3269b,_0x294a6c,_0x30f510){process['on'](a11_0x5437('0x2f'),()=>__awaiter(this,void 0x0,void 0x0,function*(){yield _0x2634e0[a11_0x5437('0xe')](_0x221a72,_0xa3269b,_0x294a6c,_0x30f510,a11_0x5437('0x26'));process[a11_0x5437('0x2b')](0x1);}));process['on'](a11_0x5437('0xb'),()=>__awaiter(this,void 0x0,void 0x0,function*(){yield _0x2634e0['completeRunGroupWithError'](_0x221a72,_0xa3269b,_0x294a6c,_0x30f510,'Main\x20job\x20was\x20terminated\x20via\x20SIGTERM');process[a11_0x5437('0x2b')](0x1);}));}function runDistributedExecution(_0x5e148f,_0x326aca,_0x4eeaf6,_0x43e430,_0x4bff29,_0x51a3ea,_0x4d354b,_0x3f78c0,_0x2977e0,_0x5d5987){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2afcc7=yield _0x5e148f[a11_0x5437('0x37')]((0x0,distributed_execution_api_1['createStartRequest'])(_0x43e430,_0x4bff29,_0x51a3ea,_0x4d354b,(0x0,split_task_graph_into_stages_1[a11_0x5437('0x19')])(_0x3f78c0),_0x326aca,_0x2977e0));return yield(0x0,process_tasks_1[a11_0x5437('0x31')])(_0x5e148f,_0x4eeaf6,_0x2afcc7,Object[a11_0x5437('0x2a')](_0x3f78c0[a11_0x5437('0x22')]));});}